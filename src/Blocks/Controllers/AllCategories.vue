<template>
  <loading v-model:active="isLoading"
           :can-cancel="true"
           :on-cancel="onCancel"
           :is-full-page="fullPage"/>

  <div class="sidebar-link" v-for="category of store.categories">

    <div class="categories-list" v-if="isEditable === true" >
      <div class="category">
        <input
            class="name"
            v-model="newCategoryName"
            v-on:keydown.enter="() => {
                  updateCategoryList(newCategoryName, category.id)
                  $emit('someChanges', editCategoryName)
                  this.editCategoryName = 0
                }"
            v-if="this.editCategoryName === category.id">
        <span class="name" v-else>
          {{ category.name }}
        </span>


        <div class="icons">
          <span class="edit"
                v-if="this.editCategoryName !== category.id"
                v-on:click="(e) => {
                  this.newCategoryName = category.name
                  this.editCategoryName = category.id
                }">
            <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 333.45 340.57"><path d="M164.18,340.54c-40.51,0-81.01,.01-121.52,0C17.02,340.53,.01,323.57,0,298,0,216.97,0,135.95,0,54.92,.01,29.57,17.04,12.44,42.25,12.43c40.17-.02,80.34,.02,120.52-.03,6.75,0,12.09,2.5,15.41,8.38,3.11,5.51,2.91,11.23-.5,16.6-3.68,5.79-9.34,7.59-15.9,7.58-36.17-.04-72.34-.02-108.51-.01-4.17,0-8.34-.1-12.5,.04-5.62,.2-8.14,2.78-8.15,8.46-.03,82.02-.03,164.05,0,246.07,0,6.11,2.86,8.66,9.59,8.67,21.17,.04,42.34,.01,63.51,.01,59.51,0,119.02,0,178.52,0,9.42,0,11.44-2.02,11.44-11.43,0-42.01-.02-84.03,.02-126.04,0-8.24,5.37-14.96,12.73-16.3,8.41-1.53,15.53,2.21,18.5,9.99,.75,1.96,1.01,4.21,1.01,6.32,.06,43.51,.13,87.03,0,130.54-.07,21.68-17.74,39.12-39.73,39.2-41.34,.15-82.68,.04-124.02,.05Z"/><path d="M283.42,135.51c-3.29,3.08-7.26,6.59-11.01,10.33-21.11,21.05-42.24,42.07-63.16,63.31-3.96,4.02-8.47,6.09-13.78,7.29-26.6,5.97-53.16,12.06-79.74,18.1-11.76,2.68-19.57-4.91-16.92-16.48,6.35-27.7,12.64-55.42,19.19-83.07,.73-3.08,2.36-6.37,4.56-8.6,24.82-25.1,49.83-50.02,74.79-74.98,.46-.46,1.02-.83,1.2-.98,28.13,28.2,56.17,56.3,84.88,85.08Z"/><path d="M210.34,38.32c11.22-11.19,22.89-23.05,34.82-34.64,5.17-5.02,12.35-4.88,17.52,.25,22.34,22.17,44.59,44.42,66.76,66.75,5.3,5.34,5.35,12.49,.09,17.91-11.49,11.81-23.22,23.39-34.51,34.71-28.2-28.3-56.22-56.42-84.68-84.99Z"/></svg>
          </span>

          <span class="edit"
                v-else
                v-on:click="() => {
                  updateCategoryList(newCategoryName, category.id)
                  $emit('someChanges', editCategoryName)
                  this.editCategoryName = 0
                }">
            <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 439 438.77"><path d="M219.42,438.74c-63.17,0-126.34-.03-189.51,.03-12.01,.01-21.73-4.34-26.78-15.44-2.31-5.08-2.97-11.28-2.98-16.98C-.04,329.37,.02,252.37,.02,175.38c0-47.83-.09-95.66,.13-143.48,.03-5.53,.91-11.43,3-16.48C7.03,6.05,15.07,1.47,25,.31,27.8-.01,30.66,.04,33.49,.04,117.99,.03,202.49,.07,287,0c22.68-.02,41.57,8.13,57.47,24.34,23.27,23.74,46.86,47.19,70.55,70.52,15.75,15.51,23.93,34.04,23.94,56.13,.01,85.49-.04,170.98,.05,256.47,.01,12.04-3.47,22.26-14.72,27.8-4.71,2.32-10.53,3.32-15.85,3.33-63,.22-126,.14-189.01,.14ZM36.35,219.14c0,33.83,0,67.67,0,101.5,0,25.33,.12,50.67-.11,76-.04,4.75,1.56,6.03,6.02,5.87,7.82-.28,15.67-.08,23.5-.08q7.43,0,7.44-7.31c0-35.67-.03-71.33,.03-107,.01-7.37,.69-14.61,5.42-20.83,6.44-8.46,15.07-11.03,25.41-11.01,73.01,.18,146.02,.09,219.03,.1,5.83,0,11.67,.14,17.5,.16,5.96,.02,10.91,2.4,15.41,6.14,7.41,6.18,9.77,14.39,9.77,23.59,.01,36.83,.07,73.67-.07,110.5-.02,4.31,1.17,5.92,5.65,5.74,7.82-.32,15.66-.09,23.5-.09q7.7,0,7.7-7.49c0-81.33-.04-162.66,.05-244,.01-11.67-4.09-21.27-12.31-29.44-24.34-24.21-48.67-48.45-72.8-72.87-5.84-5.91-12.74-9.44-20.49-11.75-2.8-.84-4.17,.24-4.34,3.02-.1,1.66-.09,3.33-.09,5,0,35.17,.1,70.33-.11,105.5-.03,5.4-.39,11.28-2.53,16.09-5.13,11.53-14.81,16.03-27.42,15.98-53.01-.22-106.01-.09-159.02-.11-2.5,0-5.13,.22-7.46-.48-3.91-1.16-7.99-2.41-11.34-4.63-9.29-6.16-11.51-15.73-11.5-26.19,.03-36,.02-72,0-108,0-6.85-.02-6.86-6.99-6.86-7.67,0-15.34-.01-23,0-6.85,.01-6.87,.02-6.87,6.95,0,58.67,0,117.33,0,176Zm183.15,183.29c34.49,0,68.98,0,103.47,0,6.53,0,6.55-.03,6.55-6.69,0-32.15,0-64.31,0-96.46,0-6.81-.03-6.88-7.04-6.88-68.65,0-137.3-.01-205.95,0-7.03,0-7.11,.12-7.11,7.4,0,31.99,0,63.98,0,95.96,0,6.64,0,6.66,6.61,6.67,34.49,0,68.98,0,103.47,0Zm36.91-311.22c0-14.33,.06-28.66-.02-42.98-.05-8.05-4.02-11.99-12.02-12.01-16.5-.05-32.99-.06-49.49,.01-8.36,.03-12.27,3.85-12.29,12.25-.07,28.49-.07,56.98,0,85.47,.02,8.65,3.9,12.57,12.55,12.64,16.16,.12,32.33,.12,48.49,0,8.97-.07,12.76-4.02,12.78-12.88,.03-14.16,0-28.32,0-42.48Z"/></svg>
          </span>

          <span class="delete"
            v-on:click="() => {
            showModal = !showModal;
            this.category = {
              id: category.id,
              name: category.name
            }
          }">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="19" viewBox="0 0 16 19" fill="none">
              <path
                  d="M14.3066 10.5404C14.3066 11.9891 14.3153 13.4375 14.3039 14.8862C14.2936 16.1901 13.6839 17.1536 12.5161 17.7756C12.0391 18.0298 11.517 18.1295 10.9784 18.1303C8.71443 18.1341 6.45046 18.1469 4.18689 18.1264C2.73366 18.1133 1.69388 17.4252 1.0885 16.1337C0.912373 15.7578 0.853533 15.3464 0.853928 14.9299C0.854717 11.9041 0.859851 8.878 0.849189 5.85224C0.847214 5.26656 1.28595 4.90264 1.80919 4.96677C2.1575 5.00926 2.48526 5.32683 2.50777 5.6726C2.5133 5.75604 2.51014 5.83988 2.51014 5.92371C2.51014 8.87877 2.51922 11.8338 2.50501 14.7889C2.50027 15.7489 3.24584 16.5096 4.25087 16.5003C6.46823 16.4795 8.68639 16.4787 10.9042 16.5003C11.9171 16.5104 12.6615 15.7458 12.6563 14.7746C12.6397 11.7875 12.65 8.79996 12.6504 5.81284C12.6504 5.25729 13.0382 4.91461 13.6021 4.96831C13.9248 4.99883 14.2265 5.26424 14.281 5.57833C14.3027 5.70428 14.3054 5.83447 14.3054 5.96273C14.307 7.48875 14.3066 9.01437 14.3062 10.5404H14.3066Z"
                  fill="#494A4E"/>
              <path
                  d="M7.58574 4.10691C5.35494 4.10691 3.12415 4.10691 0.893745 4.10691C0.435265 4.10691 0.177395 3.92263 0.0316763 3.49418C-0.102195 3.10128 0.205828 2.58746 0.625212 2.51483C0.747237 2.49358 0.873605 2.48817 0.998394 2.48779C1.98525 2.48586 2.9725 2.48161 3.95936 2.49049C4.15918 2.49242 4.22276 2.43254 4.21723 2.23744C4.20459 1.78698 4.21052 1.33613 4.21447 0.885667C4.21921 0.358323 4.55764 0.00830615 5.09747 0.00560182C6.74894 -0.00212483 8.40081 -0.00135216 10.0523 0.00482915C10.6032 0.00676082 10.9424 0.35446 10.9471 0.89378C10.9507 1.34424 10.9554 1.79509 10.9448 2.24556C10.9404 2.42945 10.9989 2.49126 11.1908 2.4901C12.2041 2.48238 13.2174 2.48701 14.2307 2.48624C14.4732 2.48624 14.7003 2.5214 14.8855 2.69641C15.1627 2.95834 15.2306 3.26779 15.0821 3.62979C14.9621 3.92147 14.671 4.10613 14.3176 4.10652C12.0738 4.10729 9.82996 4.10691 7.58613 4.10691H7.58574ZM7.59995 1.64017C7.09329 1.64017 6.58624 1.64365 6.07958 1.63786C5.94334 1.63631 5.88766 1.6819 5.89319 1.81596C5.8999 1.97667 5.89635 2.13777 5.89438 2.29887C5.8928 2.42366 5.93979 2.48817 6.07958 2.48779C7.07987 2.48508 8.08055 2.48508 9.08083 2.48779C9.22063 2.48817 9.26762 2.42366 9.26604 2.29887C9.26406 2.14434 9.25893 1.98942 9.26801 1.83527C9.2771 1.68306 9.2147 1.63477 9.06109 1.63708C8.57417 1.64481 8.08687 1.63979 7.59995 1.63979V1.64017Z"
                  fill="#494A4E"/>
              <path
                  d="M8.42743 10.3022C8.42743 9.34373 8.42545 8.38485 8.42861 7.42636C8.4298 7.0493 8.68925 6.7186 9.03242 6.63979C9.46088 6.54127 9.83091 6.69001 10.0098 7.05587C10.0667 7.17254 10.09 7.31587 10.0904 7.44722C10.0955 9.34527 10.0904 11.2429 10.0959 13.141C10.0975 13.6822 9.70572 13.9975 9.26264 14.0044C8.78126 14.0118 8.42901 13.6359 8.42782 13.1205C8.42585 12.1813 8.42743 11.2418 8.42743 10.3026V10.3022Z"
                  fill="#494A4E"/>
              <path
                  d="M6.73258 10.3095C6.73258 11.268 6.73495 12.2268 6.731 13.1853C6.72982 13.5234 6.50986 13.8375 6.21842 13.9441C5.85511 14.0766 5.50207 13.9897 5.25289 13.7096C5.08979 13.5265 5.0661 13.3066 5.0661 13.0779C5.06689 11.2251 5.0661 9.37222 5.0665 7.51937C5.0665 7.48731 5.0665 7.45486 5.06729 7.42279C5.08269 6.93601 5.4227 6.60377 5.90013 6.60995C6.37559 6.61613 6.72863 6.95881 6.7314 7.434C6.73614 8.39249 6.73298 9.35136 6.73258 10.3099V10.3095Z"
                  fill="#494A4E"/>
            </svg>
          </span>



        </div>




      </div>
    </div>


    <router-link :to="`/projects-list/${category.id}`" v-else>

      <svg v-if="category.name === 'Форумы'" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 2C5.27577 2 4.25706 2.87996 4.04188 4.04188C2.87996 4.25706 2 5.27577 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H5V17.0284C5 17.8418 5.91937 18.3149 6.58124 17.8421L9.16024 16H13.5C14.8807 16 16 14.8807 16 13.5V12.95C17.1411 12.7184 18 11.7095 18 10.5V5.5C18 3.567 16.433 2 14.5 2H6.5ZM13.5 15H8.83978L6 17.0284V15H4.5C3.67157 15 3 14.3284 3 13.5V6.5C3 5.67157 3.67157 5 4.5 5H13.5C14.3284 5 15 5.67157 15 6.5V13.5C15 14.3284 14.3284 15 13.5 15ZM13.5 4H5.08535C5.29127 3.4174 5.84689 3 6.5 3H14.5C15.8807 3 17 4.11929 17 5.5V10.5C17 11.1531 16.5826 11.7087 16 11.9146V6.5C16 5.11929 14.8807 4 13.5 4Z" fill="#212121"/></svg>
      <svg v-if="category.name === 'Маркеты'" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M11 11.5V14.5C11 14.7761 11.2239 15 11.5 15H14.5C14.7761 15 15 14.7761 15 14.5V11.5C15 11.2239 14.7761 11 14.5 11H11.5C11.2239 11 11 11.2239 11 11.5ZM12 14V12H14V14H12Z" fill="#212121"/><path d="M5.00001 2C4.85162 2 4.71089 2.06591 4.6159 2.17991L2.1159 5.17991C2.03955 5.27152 2.00002 5.3852 2 5.5V7C2 7.8885 2.38625 8.68679 3 9.23611V17.5C3 17.7761 3.22386 18 3.5 18H16.5C16.7761 18 17 17.7761 17 17.5V9.23611C17.6137 8.68679 18 7.8885 18 7V5.5C18 5.49401 18 5.48813 18.0001 5.48233C18.0005 5.39121 18.0009 5.32003 17.8841 5.17991L15.3841 2.17991C15.2891 2.06591 15.1484 2 15 2H5.00001ZM5 9C3.89543 9 3 8.10457 3 7V6H7V7C7 8.10457 6.10457 9 5 9ZM10 9C8.89543 9 8 8.10457 8 7V6H12V7C12 8.10457 11.1046 9 10 9ZM15 9C13.8954 9 13 8.10457 13 7V6H17V7C17 8.10457 16.1046 9 15 9ZM5 17H4V9.82929C4.31278 9.93985 4.64936 10 5 10C6.04349 10 6.96254 9.46725 7.5 8.6589C8.03746 9.46725 8.95651 10 10 10C11.0435 10 11.9625 9.46724 12.5 8.65889C13.0375 9.46724 13.9565 10 15 10C15.3506 10 15.6872 9.93985 16 9.82929V17H10V11.5C10 11.2239 9.77614 11 9.5 11H5.5C5.22386 11 5 11.2239 5 11.5V17ZM7.13964 5H3.56753L5.23419 3H7.8063L7.13964 5ZM11.8063 5H8.19373L8.8604 3H11.1396L11.8063 5ZM12.8604 5L12.1937 3H14.7658L16.4325 5H12.8604ZM6 17V12H9V17H6Z" fill="#212121"/></svg>
      <svg v-if="category.name === 'Продавцы'" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M8.75 3.75C8.75 2.23122 7.51878 1 6 1C4.48122 1 3.25 2.23122 3.25 3.75C3.25 5.26878 4.48122 6.5 6 6.5C7.51878 6.5 8.75 5.26878 8.75 3.75ZM4.25 3.75C4.25 2.7835 5.0335 2 6 2C6.9665 2 7.75 2.7835 7.75 3.75C7.75 4.7165 6.9665 5.5 6 5.5C5.0335 5.5 4.25 4.7165 4.25 3.75Z" fill="#212121"/><path d="M2.5 7.5H6.68252C6.51859 7.81013 6.39687 8.14601 6.32501 8.5H2.5C2.22386 8.5 2 8.72386 2 9V9.5C2 10.7591 3.09851 12.1138 5.09636 12.4309C4.77396 12.6501 4.50546 12.9426 4.31486 13.2845C2.20563 12.7119 1 11.0874 1 9.5V9C1 8.17157 1.67157 7.5 2.5 7.5Z" fill="#212121"/><path d="M7.87858 7.5C8.38298 6.88925 9.14603 6.5 10 6.5C10.854 6.5 11.617 6.88925 12.1214 7.5C12.3605 7.78952 12.5415 8.12881 12.6465 8.5C12.7139 8.73842 12.75 8.98999 12.75 9.25C12.75 10.32 12.1389 11.2473 11.2466 11.7019C10.8919 11.8825 10.4929 11.9885 10.0702 11.9991C10.0469 11.9997 10.0235 12 10 12C9.97654 12 9.95315 11.9997 9.92983 11.9991C9.50709 11.9885 9.10806 11.8826 8.75342 11.7019C7.86115 11.2473 7.25 10.32 7.25 9.25C7.25 8.98999 7.28608 8.73842 7.35352 8.5C7.4585 8.12881 7.63948 7.78952 7.87858 7.5ZM8.41841 8.5C8.31042 8.72731 8.25 8.9816 8.25 9.25C8.25 9.96407 8.67768 10.5782 9.29086 10.8504C9.50763 10.9466 9.74757 11 10 11C10.2524 11 10.4924 10.9466 10.7091 10.8504C11.3223 10.5782 11.75 9.96407 11.75 9.25C11.75 8.9816 11.6896 8.72731 11.5816 8.5C11.3362 7.98351 10.8453 7.60627 10.2597 7.51914C10.175 7.50653 10.0883 7.5 10 7.5C9.91175 7.5 9.82502 7.50653 9.74028 7.51914C9.15468 7.60627 8.66377 7.98351 8.41841 8.5Z" fill="#212121"/><path d="M15.6851 13.2845C15.4945 12.9426 15.226 12.6501 14.9036 12.4309C16.9015 12.1138 18 10.7591 18 9.5V9C18 8.72386 17.7761 8.5 17.5 8.5H13.675C13.6031 8.14601 13.4814 7.81013 13.3175 7.5H17.5C18.3284 7.5 19 8.17157 19 9V9.5C19 11.0874 17.7944 12.7119 15.6851 13.2845Z" fill="#212121"/><path d="M14.4872 13.3706C14.2234 13.1398 13.878 13 13.5 13H6.5C6.06797 13 5.6786 13.1826 5.40489 13.4749C5.15376 13.7431 5 14.1036 5 14.5V15C5 16.9714 6.85951 19 10 19C13.1405 19 15 16.9714 15 15V14.5C15 14.0496 14.8015 13.6456 14.4872 13.3706ZM6 14.5C6 14.2239 6.22386 14 6.5 14H13.5C13.7761 14 14 14.2239 14 14.5V15C14 16.4376 12.5678 18 10 18C7.43216 18 6 16.4376 6 15V14.5Z" fill="#212121"/><path d="M14 1C15.5188 1 16.75 2.23122 16.75 3.75C16.75 5.26878 15.5188 6.5 14 6.5C12.4812 6.5 11.25 5.26878 11.25 3.75C11.25 2.23122 12.4812 1 14 1ZM14 2C13.0335 2 12.25 2.7835 12.25 3.75C12.25 4.7165 13.0335 5.5 14 5.5C14.9665 5.5 15.75 4.7165 15.75 3.75C15.75 2.7835 14.9665 2 14 2Z" fill="#212121"/></svg>
      <svg v-if="category.name === 'Магазины ПАВ'" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M6.49435 8.0754C6.53946 7.77966 6.83274 7.5 7.24799 7.5C7.66324 7.5 7.95652 7.77966 8.00163 8.0754C8.04327 8.34838 8.29832 8.53592 8.57131 8.49428C8.84429 8.45264 9.03183 8.19759 8.99019 7.9246C8.86288 7.08996 8.10443 6.5 7.24799 6.5C6.39155 6.5 5.6331 7.08996 5.50579 7.9246C5.46415 8.19759 5.65169 8.45264 5.92467 8.49428C6.19766 8.53592 6.45271 8.34838 6.49435 8.0754Z" fill="#212121"/><path d="M12.748 7.5C12.3327 7.5 12.0395 7.77966 11.9944 8.0754C11.9527 8.34838 11.6977 8.53592 11.4247 8.49428C11.1517 8.45264 10.9641 8.19759 11.0058 7.9246C11.1331 7.08996 11.8916 6.5 12.748 6.5C13.6044 6.5 14.3629 7.08996 14.4902 7.9246C14.5318 8.19759 14.3443 8.45264 14.0713 8.49428C13.7983 8.53592 13.5433 8.34838 13.5016 8.0754C13.4565 7.77966 13.1632 7.5 12.748 7.5Z" fill="#212121"/><path d="M5.49536 10C5.3543 10 5.2198 10.0596 5.12502 10.1641C5.03025 10.2686 4.98402 10.4082 4.99773 10.5486C5.23637 12.9918 7.15425 15 9.99536 15C12.8364 15 14.7543 12.9918 14.993 10.5486C15.0067 10.4082 14.9605 10.2686 14.8657 10.1641C14.7709 10.0596 14.6364 10 14.4954 10H5.49536ZM9.99536 14C7.91367 14 6.47924 12.6972 6.08316 11H13.9076C13.5114 12.6972 12.077 14 9.99536 14Z" fill="#212121"/><path d="M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10Z" fill="#212121"/></svg>
      <svg v-if="category.name === 'Обменники'" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M11.1464 6.85355C11.3417 7.04882 11.6583 7.04882 11.8536 6.85355C12.0488 6.65829 12.0488 6.34171 11.8536 6.14645L10.7071 5H12.5C13.8807 5 15 6.11929 15 7.5V12C13.3431 12 12 13.3431 12 15C12 16.6569 13.3431 18 15 18C16.6569 18 18 16.6569 18 15C18 13.6938 17.1652 12.5825 16 12.1707V7.5C16 5.567 14.433 4 12.5 4H10.7071L11.8536 2.85355C12.0488 2.65829 12.0488 2.34171 11.8536 2.14645C11.6583 1.95118 11.3417 1.95118 11.1464 2.14645L9.14645 4.14645C8.95118 4.34171 8.95118 4.65829 9.14645 4.85355L11.1464 6.85355ZM17 15C17 16.1046 16.1046 17 15 17C13.8954 17 13 16.1046 13 15C13 13.8954 13.8954 13 15 13C16.1046 13 17 13.8954 17 15ZM8 5C8 6.65685 6.65685 8 5 8V12.5C5 13.8807 6.11929 15 7.5 15H9.29289L8.14645 13.8536C7.95118 13.6583 7.95118 13.3417 8.14645 13.1464C8.34171 12.9512 8.65829 12.9512 8.85355 13.1464L10.8536 15.1464C11.0488 15.3417 11.0488 15.6583 10.8536 15.8536L8.85355 17.8536C8.65829 18.0488 8.34171 18.0488 8.14645 17.8536C7.95118 17.6583 7.95118 17.3417 8.14645 17.1464L9.29289 16H7.5C5.567 16 4 14.433 4 12.5V7.82929C2.83481 7.41746 2 6.30622 2 5C2 3.34315 3.34315 2 5 2C6.65685 2 8 3.34315 8 5ZM7 5C7 3.89543 6.10457 3 5 3C3.89543 3 3 3.89543 3 5C3 6.10457 3.89543 7 5 7C6.10457 7 7 6.10457 7 5Z" fill="#212121"/></svg>

      <!--дефолтная иконка-->
      <svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 304.05 316.75" width="26" height="26"
           v-if="category.name !== 'Форумы' || category.name !== 'Обменники' || category.name !== 'Маркеты' || category.name !== 'Продавцы' || category.name !== 'Магазины ПАВ'">
        <path
            d="M262.36,38.36c0,15.15,0,29.63,0,44.1,0,16,.07,31.99,0,47.99-.03,5.52-3.13,9.31-7.82,10.09-4.73,.78-9.37-1.7-10.74-6.15-.62-2.01-.58-4.27-.58-6.41-.03-21.99,0-43.99,0-65.98,0-1.29-.15-2.59-.26-4.47-5.34,0-10.45,0-15.56,0-66.81,.01-133.63,.03-200.44,.04q-7.68,0-7.67,7.87c0,69.65,0,139.29,0,208.94,0,7.14,.05,7.14,7.31,7.14,33.66,0,67.31,0,100.97,0,1.33,0,2.68-.06,4,.08,5.68,.62,9.21,4.56,9.04,9.99-.16,5.23-3.65,8.88-9.34,9.02-9.82,.24-19.66,.17-29.49,.17-25.66,0-51.32,0-76.97-.06-15.99-.03-24.74-8.71-24.75-24.68C0,204.72,0,133.41,0,62.1c0-14.15,9.32-23.71,23.34-23.72,78.31-.05,156.62-.02,234.93-.02,1.14,0,2.28,0,4.09,0Z"/>
        <path
            d="M227.54,316.74c-41.36,.51-76.62-33.52-77.18-74.49-.6-43.38,32.74-78.4,75.14-78.96,43.08-.56,77.87,32.95,78.53,75.66,.66,42.42-33.6,77.27-76.49,77.79Zm57.08-76.8c-.37-32.77-26.18-57.97-58.9-57.53-30.83,.42-56.7,27.02-56.23,57.83,.5,32.61,26.38,57.58,59.28,57.2,30.64-.36,56.2-26.67,55.85-57.49Z"/>
        <path
            d="M167.61,.06c35.98,0,71.95-.03,107.93,.01,16.63,.02,25.13,8.6,25.15,25.27,.04,39.31,.05,78.62,.05,117.92,0,2.83,.07,5.69-.28,8.48-.6,4.71-3.49,7.43-8.17,8.06-4.52,.62-8.74-1.98-10.05-6.38-.6-2.03-.73-4.25-.73-6.39-.04-40.14-.02-80.28-.02-120.42,0-7.26,0-7.3-7.15-7.3-72.12-.02-144.24-.03-216.37-.07-2.14,0-4.37-.05-6.41-.64-4.57-1.31-6.78-4.69-6.73-9.35,.04-4.57,3.36-8.23,7.87-9,1.3-.22,2.65-.24,3.98-.24C93.66,0,130.64,0,167.61,0V.06Z"/>
        <path
            d="M130.86,128c17.83,0,35.66-.01,53.49,.01,2.16,0,4.37-.06,6.47,.37,4.43,.91,6.95,3.93,7.41,8.31,.47,4.43-1.51,7.9-5.69,9.54-2.1,.82-4.55,1.02-6.84,1.02-36.49,.06-72.99,.05-109.48,.03-6.48,0-10.26-2.16-11.72-6.55-2.11-6.35,2.2-12.42,9.37-12.66,7.82-.26,15.66-.09,23.49-.09,11.16,0,22.33,0,33.49,0Z"/>
        <path
            d="M95.88,211.3c-6.82,0-13.64,.06-20.46-.01-7.18-.08-11.4-3.77-11.36-9.77,.04-5.83,4.08-9.44,11.04-9.49,13.97-.09,27.94-.08,41.91,0,6.71,.04,11.01,3.97,10.95,9.66-.06,5.61-4.52,9.52-11.13,9.59-6.99,.07-13.97,.02-20.96,.02Z"/>
        <path
            d="M226.49,245.78c8.01-8.58,15.3-16.54,22.78-24.33,5.13-5.34,12.77-4.53,15.93,1.53,2.09,4,1.46,7.83-1.52,11.07-9.68,10.52-19.39,21.03-29.26,31.38-4.22,4.43-9.79,4.52-14.19,.31-6.49-6.21-12.82-12.59-19.04-19.05-3.92-4.07-3.89-9.69-.29-13.45,3.72-3.89,9.59-4.03,13.8,.05,4.04,3.91,7.74,8.17,11.79,12.49Z"/>
      </svg>

      {{ category.name }}
    </router-link>


  </div>
  {{ data.data }}

  <modal-window-backdrop
      v-if="showModal === true"
      v-on:changeModal="(emitShowModal) => {this.showModal = emitShowModal}"
      v-bind:icon-type="'warning'"
      v-bind:heading="'Удалить категорию: ' + category.name"
      v-bind:description="'Это действие безвозвратно удалит данную категорию, подтвердить?'"
      v-bind:descriptionType="'text'"
      v-bind:confirmAction="true"

      v-on:confirmAction="(emitConfirmAction) => {
        if (emitConfirmAction === true) {
          deleteCategory(category.id)
          this.getCategories()
          this.deleteStateMessage = `Категория ${category.name} успешно удалена! Надеюсь это не было случайностью.`


        }
        showModal === false
      }"

  >

  </modal-window-backdrop>
</template>

<script>
import Modal from "../../components/Popups/Modal.vue";
import Loading from 'vue-loading-overlay';
import 'vue-loading-overlay/dist/css/index.css';
import config from "../../assets/js/config.js";
import {reactive, watch} from "vue";
import {store} from "../../assets/js/services/categoriesService.js";



export default {
  name: "ShopsCategories.vue",
  emits: ['someChanges'],
  props: ['isEditable'],

  data() {
    return {
      data: '',
      categories: '',
      showModal: false,
      editCategoryName: 0,
      count: 3,
      newCategoryName: '',
      changed: true,

      isLoading: false,
      fullPage: true,
      obj: {},
      store
    }
  },
  components: { Modal, Loading },
  created() {
    this.isLoading = true
  },
  mounted() {
    this.getCategories()



  },

  updated() {

    this.isLoading = false
  },
  setup() {


    watch(store, (value, oldValue) => {
    }, { immediate: true })
  },

  methods: {
    getCategories() {
      //

      const myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      fetch(`${config.api.url}categories/`, {
        method: "GET",
        headers: myHeaders,
      })
          .then((response) => response.json())
          .then((result) => {


            store.categories = result.categories

            // result.success === true ? this.categories = result.categories : console.error("Can't load categories, fetch result: ", result)
          })
          .catch((error) => {console.error(error)});


    },


    deleteCategory(categoryId) {
      const myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");
      myHeaders.append("Authorization", `Bearer ${localStorage.getItem('token')}`);

      fetch(`http://62.113.96.171:3000/categories/${categoryId}`, {
        method: "DELETE",
        headers: myHeaders,
      })
          .then((response) => {
            if (response.success === true) {
              response.json()


            } else {

              this.modal = {
                iconType: 'ok',
                heading: 'Проект успешно добавлен!',
                description: `Спасибо ${this.username}! Поскольку ты админ то он уже опубликован!`,
                descriptionType: 'text',
                exit: true,
                close: true,
                confirm: false

              }

            }
          })
          .then(res => {

            const index = store.categories.findIndex(item => item.id === categoryId)
            store.categories.splice(index)
          })
          .catch((error) => {
            console.error(error)
          });



    },
  }
}
</script>

<style scoped lang="scss">


input.name {
  font-size: 16px;
  padding: 2px 10px;
  border-radius: 5px;
  margin-top: 0px;
  border: 1px solid #eaeaea;
  width: 70%;
  font-family: "Montserrat", "Arial", Serif;
}
.category-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-top: 50px;

  .sidebar-link {
    margin-top: 10px;
    margin-right: 3%;
    width: 45%;
    margin-bottom: 20px;
    box-sizing: border-box;



    .category {
      display: flex;
    }
    .name {
      font-size: 14px;
      font-weight: 400;
      width: 70%;
      box-sizing: border-box;
      margin-right: 10px;

    }

    .icons {
      display: flex;
      justify-content: end;


      svg {
        left: 10px;
      }
    }

    .delete, .edit {
      width: 25px;
      height: 25px;
      color: var(--86868B, #494A4E);
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: .3s ease;

      svg {
        margin-right: 10px;
        path, defs {
          transition: .3s ease;
          fill: #000;
        }
      }

      &:hover {
        color: #C8716B;
        svg {
          path, defs {
            fill: #C8716B;
          }
        }
      }
    }
  }
}

@media screen and (max-width: 768px) {



  .category-list {
    flex-wrap: wrap;
    width: 100%;
    display: block;

    .sidebar-link {
      width: 100%;
      margin-top: 20px;
      margin-bottom: 0;

      align-items: center;

      .name {
        width: 90%;
        line-height: 2;
      }
      .icons {
        .edit, .delete {
          width: 40px;
          height: 40px;
          svg {
            width: 35px;
            height: 35px;
            left: 0;
            margin-left: 20px;
            margin-right: 0;
          }
        }
      }
    }
  }


}
</style>