<template>
    <header class="header">
        <default-header-links style="margin-bottom: 20px;" />

        <div class="header-box_fluid" :style="{position: header.position}">
            <div class="header-box wrapper">
                <div class="header-box_left">
                    <router-link to="/">
                        <div class="logotype">
                            <svg xmlns="http://www.w3.org/2000/svg" width="75" height="31" viewBox="0 0 75 31" fill="none">
                                <path d="M21.1391 18.8042C21.1391 19.063 21.0949 19.3408 21.0065 19.6374C20.9234 19.934 20.7829 20.209 20.5853 20.4625C20.3929 20.716 20.1408 20.929 19.8288 21.1016C19.5168 21.2688 19.1346 21.3523 18.6823 21.3523H10.9841C10.8385 21.3523 10.7033 21.3254 10.5785 21.2715C10.4537 21.2175 10.3445 21.1448 10.2509 21.053C10.1625 20.956 10.0923 20.8428 10.0403 20.7133C9.98832 20.5839 9.96234 20.4436 9.96234 20.2926V10.8119C9.96234 10.6663 9.98832 10.5288 10.0403 10.3994C10.0923 10.27 10.1625 10.1567 10.2509 10.0596C10.3445 9.96258 10.4537 9.88705 10.5785 9.83317C10.7033 9.77922 10.8385 9.75222 10.9841 9.75222H17.7697C18.0193 9.75222 18.2871 9.79811 18.5731 9.88975C18.859 9.98146 19.1243 10.1298 19.3686 10.3347C19.6182 10.5342 19.8236 10.7958 19.9848 11.1193C20.1512 11.4429 20.2344 11.8393 20.2344 12.3085V12.7049C20.2344 13.077 20.1746 13.4788 20.055 13.9102C19.9354 14.3362 19.743 14.7407 19.4778 15.1236C19.7066 15.2692 19.9198 15.4445 20.1174 15.6493C20.3202 15.8543 20.497 16.0916 20.6478 16.3612C20.7985 16.6309 20.9181 16.9356 21.0065 17.2753C21.0949 17.6151 21.1391 17.9899 21.1391 18.3998V18.8042ZM19.1112 18.3998C19.1112 18.1247 19.0696 17.8793 18.9864 17.6636C18.9032 17.4425 18.7862 17.2538 18.6355 17.0973C18.4847 16.941 18.3027 16.8223 18.0895 16.7415C17.8763 16.6552 17.6371 16.612 17.3719 16.612H12.8014V14.4926H16.4594C16.7246 14.4926 16.9638 14.4522 17.177 14.3713C17.3902 14.285 17.5721 14.1636 17.7229 14.0072C17.8737 13.8509 17.9881 13.6648 18.0661 13.449C18.1493 13.228 18.1909 12.9799 18.1909 12.7049V12.3085C18.1909 12.0065 18.0505 11.8555 17.7697 11.8555H11.9902V19.2491H18.6823C18.7187 19.2491 18.7629 19.2464 18.8149 19.241C18.8668 19.2356 18.9137 19.2195 18.9552 19.1925C18.9968 19.1655 19.0332 19.1197 19.0644 19.055C19.0956 18.9903 19.1112 18.9013 19.1112 18.788V18.3998Z" fill="#333333"/>
                                <path d="M33.8836 21.3523H31.8557V18.5049H24.7269V21.3523H22.699V15.5523C22.699 14.7056 22.8394 13.9263 23.1202 13.2145C23.401 12.5026 23.791 11.8905 24.2902 11.3782C24.7893 10.8659 25.3795 10.4668 26.0607 10.181C26.7418 9.89517 27.4854 9.75222 28.2913 9.75222H32.8619C33.0023 9.75222 33.1349 9.77922 33.2596 9.83317C33.3845 9.88705 33.4936 9.96258 33.5872 10.0596C33.6808 10.1567 33.7536 10.27 33.8056 10.3994C33.8576 10.5288 33.8836 10.6663 33.8836 10.8119V21.3523ZM24.7269 16.4017H31.8557V11.8555H28.2913C28.2289 11.8555 28.0963 11.8663 27.8935 11.8878C27.696 11.904 27.4646 11.9499 27.1994 12.0253C26.9394 12.1009 26.6638 12.2168 26.3726 12.3732C26.0814 12.5296 25.8137 12.7453 25.5693 13.0203C25.3249 13.2954 25.1221 13.6405 24.9609 14.0558C24.8049 14.4656 24.7269 14.9645 24.7269 15.5523V16.4017Z" fill="#333333"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.0215 1.97617C6.84695 1.97617 1 8.01364 1 15.5C1 22.9863 6.84695 29.0238 14.0215 29.0238H60.7263C67.9008 29.0238 73.7478 22.9863 73.7478 15.5C73.7478 8.01364 67.9008 1.97617 60.7263 1.97617H14.0215ZM0 15.5C0 7.49605 6.26059 0.976166 14.0215 0.976166H60.7263C68.4872 0.976166 74.7478 7.49605 74.7478 15.5C74.7478 23.5039 68.4872 30.0238 60.7263 30.0238H14.0215C6.26059 30.0238 0 23.5039 0 15.5Z" fill="#333333"/>
                                <path d="M60.8593 4.45353H48.0628C42.17 4.45353 37.3928 9.40813 37.3928 15.5199C37.3928 21.6318 42.17 26.5864 48.0628 26.5864H60.8593C66.7521 26.5864 71.5293 21.6318 71.5293 15.5199C71.5293 9.40813 66.7521 4.45353 60.8593 4.45353Z" fill="#333333"/>
                                <path d="M53.5707 10.3832C53.6487 10.572 53.6722 10.7715 53.641 10.9818C53.6098 11.1868 53.5266 11.362 53.3913 11.5076L46.6993 19.2491H53.5551V21.3523H44.414C44.2165 21.3523 44.0319 21.2958 43.8603 21.1825C43.6939 21.0638 43.5691 20.9102 43.4859 20.7214C43.3975 20.5326 43.3689 20.3358 43.4001 20.1309C43.4365 19.9259 43.5197 19.748 43.6497 19.597L50.3574 11.8555H43.4859V9.75222H52.6426C52.8402 9.75222 53.0222 9.81158 53.1886 9.93022C53.3602 10.0435 53.4875 10.1945 53.5707 10.3832Z" fill="#FFDD2D"/>
                                <path d="M66.3778 21.3523H64.3496V18.5049H57.221V21.3523H55.1931V15.5523C55.1931 14.7056 55.3334 13.9263 55.6142 13.2145C55.895 12.5026 56.285 11.8905 56.7842 11.3782C57.2833 10.8659 57.8738 10.4668 58.5549 10.181C59.2361 9.89517 59.9796 9.75222 60.7856 9.75222H65.3558C65.4964 9.75222 65.6292 9.77922 65.7539 9.83317C65.8787 9.88705 65.9876 9.96258 66.0812 10.0596C66.1748 10.1567 66.2479 10.27 66.2995 10.3994C66.3517 10.5288 66.3778 10.6663 66.3778 10.8119V21.3523ZM57.221 16.4017H64.3496V11.8555H60.7856C60.7232 11.8555 60.5905 11.8663 60.3874 11.8878C60.1901 11.904 59.9587 11.9499 59.6932 12.0253C59.4335 12.1009 59.1578 12.2168 58.8669 12.3732C58.5753 12.5296 58.3076 12.7453 58.0632 13.0203C57.8187 13.2954 57.6163 13.6405 57.4552 14.0558C57.2992 14.4656 57.221 14.9645 57.221 15.5523V16.4017Z" fill="#FFDD2D"/>
                            </svg>
                        </div>
                    </router-link>

                    <div class="search">
                        <input-search/>
                    </div>
                </div>

                <div class="header-box_right">
                    <button-secondary @click="addProject()">
                        <template #icon>
                            <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="13" viewBox="0 0 14 13" fill="none">
                                <path d="M7 3.83333V9.16667M4.33333 6.5H9.66667M4.2 12.5H9.8C10.9201 12.5 11.4802 12.5 11.908 12.282C12.2843 12.0903 12.5903 11.7843 12.782 11.408C13 10.9802 13 10.4201 13 9.3V3.7C13 2.5799 13 2.01984 12.782 1.59202C12.5903 1.21569 12.2843 0.909734 11.908 0.717987C11.4802 0.5 10.9201 0.5 9.8 0.5H4.2C3.0799 0.5 2.51984 0.5 2.09202 0.717987C1.71569 0.909734 1.40973 1.21569 1.21799 1.59202C1 2.01984 1 2.5799 1 3.7V9.3C1 10.4201 1 10.9802 1.21799 11.408C1.40973 11.7843 1.71569 12.0903 2.09202 12.282C2.51984 12.5 3.0799 12.5 4.2 12.5Z" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </template>
                        <template #text>Разместить</template>
                    </button-secondary>

                    <button-primary>
                        <template #icon>
                            <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="13" viewBox="0 0 14 13" fill="none">
                                <path d="M3 9.83333C3 10.4533 3 10.7633 3.06815 11.0176C3.25308 11.7078 3.79218 12.2469 4.48236 12.4319C4.7367 12.5 5.04669 12.5 5.66667 12.5H9.8C10.9201 12.5 11.4802 12.5 11.908 12.282C12.2843 12.0903 12.5903 11.7843 12.782 11.408C13 10.9802 13 10.4201 13 9.3V3.7C13 2.5799 13 2.01984 12.782 1.59202C12.5903 1.21569 12.2843 0.909734 11.908 0.717987C11.4802 0.5 10.9201 0.5 9.8 0.5H5.66667C5.04669 0.5 4.73669 0.5 4.48236 0.568148C3.79218 0.753083 3.25308 1.29218 3.06815 1.98236C3 2.2367 3 2.54669 3 3.16667M7 3.83333L9.66667 6.5M9.66667 6.5L7 9.16667M9.66667 6.5H1" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </template>
                        <template #text>Войти</template>
                    </button-primary>
                </div>
            </div>

        </div>
    </header>

</template>

<script setup>
import DefaultHeaderLinks from "@/core/template/header/DefaultHeaderLinks.vue";
import ButtonPrimary from "@/core/layout/buttons/ButtonPrimary.vue";
import ButtonSecondary from "@/core/layout/buttons/ButtonSecondary.vue";
import InputSearch from "@/core/layout/inputs/InputSearch.vue";
import {onMounted, reactive} from "vue";
import {useRouter} from "vue-router";
import {addNotice} from "@/js/notifications.js";
import {userStore} from "@/Stores/userStore.js";
import SignIn from '@/components/popups/controllers/Auth/AuthController.vue'
import {callPopup} from "@/core/layout/popup/popupSettings.js";
import InputSearchNew from "@/components/Inputs/InputSearchNew.vue";

const header = reactive({
    position: 'relative',
    animate: null,
})

const togglePosition = (e) => {
    if (window.scrollY > 65) {
        header.position = 'fixed'
    } else {
        header.position = 'relative'
    }

}

const router = useRouter()

const addProject = () => {
    if(userStore.token) {
        router.replace('/add-project')
    } else {
        callPopup('Авторизация', SignIn)
    }
}

onMounted(() => {
    window.addEventListener('scroll', togglePosition)
})
</script>
<style lang="scss" scoped>
.header {
  padding: 20px 0;
  box-sizing: border-box;
  width: 100%;

  .header-box_fluid {
    background-color: #fff;
    transition: .2s ease;
    box-shadow: rgba(17, 17, 26, 0.05) 0px 4px 16px, rgba(17, 17, 26, 0.05) 0px 8px 32px;
    top: 0;
    right: 0;
    left: 0;

  }
  .header-box {

    display: flex;
    width: 100%;
    height: auto;
    padding: 10px;
    box-sizing: border-box;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    flex-shrink: 0;


    .header-box_right {
      display: flex;
      align-items: end;
      gap: 10px;
    }

    .header-box_left {
      display: flex;
      align-items: end;
      gap: 10px;

      .logotype {
        height: fit-content;
        display: flex;
        box-sizing: border-box;

        svg {
          height: 100%;
          width: 80px;
        }
      }
    }
  }
}

@keyframes slideDown {
  0% { transform: translateY(-50px) }
  100% { transform: translateY(0) }

}
</style>
